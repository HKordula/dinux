<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DINUX Admin</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
</head>
<body>
    <div id="navbar-include"></div>

    <!-- Hero Section -->
     <div class="main">
        <div class="main__img--container">
          <img src="../assets/images/main-img.jpg" alt="pic" id="main__img">
        </div>
          <div class="main__container">
            <div class="main__content">
                <h1>ADMIN PANEL</h1>
                <h2>Welcome, <span id="admin-username">Admin</span></h2> <!-- TODO: Replace with dynamic username --> 
                <p>Manage users, dinosaurs, and votes below.</p>
                <button class="main__btn">
                    <a href="/">Dinos</a>
                </button>
                <button class="main__btn">
                    <a href="/">Users</a>
                </button>
                <button class="main__btn">
                    <a href="/">Votes</a>
                </button>
            </div>
          </div>
     </div>

     <!-- Dinosaur Table Start -->
    <h2>Dinosaur List</h2>
    <table border="1" style="width:100%; border-collapse:collapse;">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Species</th>
                <th>Description</th>
                <th>Era</th>
                <th>Diet</th>
                <th>Size</th>
                <th>Weight</th>
                <th>Categories</th>
                <th>Environments</th>
                <th>Image</th>
            </tr>
        </thead>
        <tbody id="dino-table-body">
            
        </tbody>
    </table>

    <div id="footer-include"></div>

    <script src="/assets/js/main.js"></script>
</body>
</html>

<script>
document.addEventListener('DOMContentLoaded', function() {
    fetch('http://localhost:3000/api/dinos')
        .then(response => response.json())
        .then(data => {
            const dinos = Array.isArray(data) ? data : data.dinos;
            const tbody = document.getElementById('dino-table-body');
            tbody.innerHTML = '';
            if (Array.isArray(dinos)) {
                dinos.forEach(dino => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${dino.id}</td>
                        <td>${dino.name}</td>
                        <td>${dino.species}</td>
                        <td>${dino.description}</td>
                        <td>${dino.era}</td>
                        <td>${dino.diet}</td>
                        <td>${dino.size}</td>
                        <td>${dino.weight}</td>
                        <td>${Array.isArray(dino.categories) ? dino.categories.join(', ') : dino.categories}</td>
                        <td>${Array.isArray(dino.environments) ? dino.environments.join(', ') : dino.environments}</td>
                        <td><img src="${dino.image}" alt="${dino.name}" width="60"></td>
                    `;
                    tbody.appendChild(row);
                });
            } else {
                tbody.innerHTML = `<tr><td colspan="11">No data found</td></tr>`;
            }
        })
        .catch(error => {
            document.getElementById('dino-table-body').innerHTML = `<tr><td colspan="11">Failed to load data</td></tr>`;
            console.error('Error fetching dinos:', error);
        });
});
</script>